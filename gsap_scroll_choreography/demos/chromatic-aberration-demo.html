<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Chromatic Aberration Demo - Visual Codex</title>

  <script src="https://cdnjs.cloudflare.com/ajax/libs/gsap/3.12.2/gsap.min.js"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/gsap/3.12.2/ScrollTrigger.min.js"></script>

  <style>
    * { margin: 0; padding: 0; box-sizing: border-box; }

    body {
      background: #0A0A0B;
      color: #fff;
      font-family: -apple-system, BlinkMacSystemFont, sans-serif;
      min-height: 400vh;
    }

    .section {
      min-height: 100vh;
      display: flex;
      align-items: center;
      justify-content: center;
      padding: 40px;
    }

    .chromatic-text {
      font-size: clamp(3rem, 12vw, 8rem);
      font-weight: 900;
      text-transform: uppercase;
      letter-spacing: -0.02em;
      text-align: center;
      cursor: pointer;
      transition: text-shadow 0.1s;
    }

    .chromatic-word {
      display: inline-block;
      margin: 0 20px;
    }

    .glitch-container {
      position: relative;
    }

    .glitch-text {
      font-size: 4rem;
      font-weight: 700;
      text-shadow:
        -2px 0 rgba(255, 0, 0, 0.7),
        2px 0 rgba(0, 255, 255, 0.7);
    }

    .velocity-text {
      font-size: 5rem;
      font-weight: 800;
    }

    .split-chars span {
      display: inline-block;
    }

    .controls {
      position: fixed;
      bottom: 40px;
      left: 50%;
      transform: translateX(-50%);
      display: flex;
      gap: 20px;
      z-index: 100;
    }

    .control-btn {
      padding: 12px 24px;
      background: rgba(255,255,255,0.1);
      border: 1px solid rgba(255,255,255,0.2);
      border-radius: 8px;
      color: #fff;
      cursor: pointer;
      transition: all 0.2s;
    }

    .control-btn:hover {
      background: rgba(123,63,242,0.3);
      border-color: #7B3FF2;
    }

    .info {
      position: fixed;
      top: 40px;
      left: 40px;
      font-size: 14px;
      color: rgba(255,255,255,0.5);
    }
  </style>
</head>
<body>
  <div class="info">
    Pattern 11: Chromatic Aberration<br>
    Hover, click, and scroll to see effects
  </div>

  <!-- Section 1: Hover Effect -->
  <section class="section">
    <h1 class="chromatic-text" id="hover-text">HOVER ME</h1>
  </section>

  <!-- Section 2: Scroll-driven -->
  <section class="section">
    <div class="chromatic-text">
      <span class="chromatic-word">SCROLL</span>
      <span class="chromatic-word">DRIVEN</span>
      <span class="chromatic-word">RGB</span>
    </div>
  </section>

  <!-- Section 3: Glitch on click -->
  <section class="section">
    <div class="glitch-container">
      <h2 class="glitch-text" id="glitch-text">CLICK FOR GLITCH</h2>
    </div>
  </section>

  <!-- Section 4: Velocity-based -->
  <section class="section">
    <h2 class="velocity-text" id="velocity-text">SCROLL FAST</h2>
  </section>

  <div class="controls">
    <button class="control-btn" onclick="triggerGlitch()">Trigger Glitch</button>
    <button class="control-btn" onclick="resetAll()">Reset</button>
  </div>

  <script>
    gsap.registerPlugin(ScrollTrigger);

    // Hover effect
    const hoverText = document.getElementById('hover-text');

    hoverText.addEventListener('mouseenter', () => {
      gsap.to(hoverText, {
        textShadow: "-5px 0 rgba(255,0,0,0.8), 5px 0 rgba(0,255,255,0.8)",
        duration: 0.2
      });
    });

    hoverText.addEventListener('mouseleave', () => {
      gsap.to(hoverText, {
        textShadow: "0 0 transparent",
        duration: 0.5
      });
    });

    // Scroll-driven chromatic per word
    document.querySelectorAll('.chromatic-word').forEach((word, i) => {
      gsap.fromTo(word,
        { textShadow: "0 0 rgba(255,0,0,0), 0 0 rgba(0,255,255,0)" },
        {
          textShadow: "-4px 0 rgba(255,0,0,0.8), 4px 0 rgba(0,255,255,0.8)",
          scrollTrigger: {
            trigger: word,
            start: "top 80%",
            end: "top 30%",
            scrub: 0.5
          }
        }
      );
    });

    // Glitch effect
    const glitchText = document.getElementById('glitch-text');

    function triggerGlitch() {
      const tl = gsap.timeline();

      for (let i = 0; i < 10; i++) {
        const offset = Math.random() * 10 - 5;
        tl.to(glitchText, {
          textShadow: `
            ${offset}px ${Math.random() * 3}px rgba(255,0,0,${0.5 + Math.random() * 0.5}),
            ${-offset}px ${Math.random() * 3}px rgba(0,255,255,${0.5 + Math.random() * 0.5})
          `,
          x: Math.random() * 4 - 2,
          duration: 0.05,
          ease: "steps(1)"
        });
      }

      tl.to(glitchText, {
        textShadow: "-2px 0 rgba(255,0,0,0.7), 2px 0 rgba(0,255,255,0.7)",
        x: 0,
        duration: 0.1
      });
    }

    glitchText.addEventListener('click', triggerGlitch);

    // Velocity-based chromatic
    const velocityText = document.getElementById('velocity-text');

    ScrollTrigger.create({
      trigger: velocityText,
      start: "top bottom",
      end: "bottom top",
      onUpdate: (self) => {
        const velocity = Math.abs(self.getVelocity()) / 1000;
        const offset = Math.min(velocity, 15);

        velocityText.style.textShadow = `
          ${-offset}px 0 rgba(255, 0, 0, ${0.3 + offset * 0.05}),
          ${offset}px 0 rgba(0, 255, 255, ${0.3 + offset * 0.05})
        `;
      }
    });

    function resetAll() {
      gsap.to([hoverText, glitchText, velocityText], {
        textShadow: "none",
        duration: 0.5
      });
    }
  </script>

  <!--
  Visual Codex Pattern: Chromatic Aberration
  Category: GSAP Scroll Choreography
  Pattern: 11
  Author: Paul Phillips
  Â© 2025 Clear Seas Solutions LLC
  -->
</body>
</html>
